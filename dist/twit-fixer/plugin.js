(()=>{var c=Object.defineProperty;var i=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var d=(e,o)=>{for(var t in o)c(e,t,{get:o[t],enumerable:!0})},h=(e,o,t,l)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of p(o))!g.call(e,n)&&n!==t&&c(e,n,{get:()=>o[n],enumerable:!(l=i(o,n))||l.enumerable});return e};var u=e=>h(c({},"__esModule",{value:!0}),e);var y={};d(y,{onLoad:()=>w,onUnload:()=>x});var{http:{intercept:f}}=shelter,r;function m(e,o){console.log("req:"),console.log(e);try{let t=e.body.content,l=/(?<pre>https?:\/\/)(?:x|(?:(?:v|f)x)?twitter)\.com(?<post>\/\w+\/status\/\d+(?:\/photo(?:\/(?<photonum>\d+)?)?)?)(?:\/en)*(?<query>(?:\?$|[a-zA-Z0-9\.\,\;\?\'\\\+&%\$\=~_\-\*]+))?(?<fragment>#[a-zA-Z0-9\-\.]+)?/gi;if(l.test(t)){let n=(b,s,a,k,v,z,A)=>s+"fxtwitter.com"+a+"/en";if(t=t.replace(l,n),t.length>2e3){console.log("Can't replace twitter link; message would be too long.");return}e.body.content=t,console.log("Replaced twitter link: "+t)}}catch(t){console.log(t)}o(e)}function w(){r=f("post",/\/channels\/\d+\/messages/,m),console.log("twit-fixer loaded")}function x(){r(),console.log("twit-fixer unloaded")}return u(y);})();
