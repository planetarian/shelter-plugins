(()=>{var a=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var S=(e,t)=>{for(var n in t)a(e,n,{get:t[n],enumerable:!0})},f=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of h(t))!E.call(e,o)&&o!==n&&a(e,o,{get:()=>t[o],enumerable:!(s=l(t,o))||s.enumerable});return e};var g=e=>f(a({},"__esModule",{value:!0}),e);var M={};S(M,{onLoad:()=>D,onUnload:()=>I});var{flux:{dispatcher:i,stores:{GuildMemberStore:m,ChannelStore:C,SelectedChannelStore:_,RelationshipStore:p}},util:{getFiber:b,reactFiberWalker:A},observeDom:N}=shelter;function L(e){if(e.dataset.showuname_injected)return;e.dataset.showuname_injected=!0;let t=A(b(e),"message",!0)?.pendingProps?.message;if(!t)return;let n=t?.author?.id,s=t.author?.username;if(!s||!n)return;let{type:o,guild_id:d}=C.getChannel(t.channel_id),r=o?p.getNickname(n):m.getNick(d,n);!r||s===r.toLowerCase()||(e.firstElementChild.textContent=`${s} (${r})`)}function u(e){if(e.type==="MESSAGE_CREATE"&&e.channelId!==_.getChannelId())return;let t=N("[id^=message-username-]",n=>{L(n),t()});setTimeout(t,500)}var c=["MESSAGE_CREATE","CHANNEL_SELECT","LOAD_MESSAGES_SUCCESS","UPDATE_CHANNEL_DIMENSIONS"];function D(){for(let e of c)i.subscribe(e,u);console.log("username-display loaded")}function I(){for(let e of c)i.unsubscribe(e,u);console.log("username-display unloaded")}return g(M);})();
